language: php

php:
  - 5.3
  - 5.4

services:
  - mysql

env:
  - DB=mysql

before_script:
  - if [[ "$DB" == "mysql" ]]; then mysql -e "create database IF NOT EXISTS mwi_tests;" -uroot; fi
  - cd ~/builds
  - git clone git://github.com/JeffCost/travis.git
  - mv ./travis ./JeffCost/mwi/bundles/travis
  - mv ./mwi/bundles/travis/tests ./JeffCost/mwi/application/config
  - mv ./mwi/bundles/travis/paths.php ./JeffCost/mwi/paths.php
  - mv ./mwi/bundles/travis/application.php ./JeffCost/mwi/application/config/application.php
  - echo "<?php return array('travis' => array('auto' => true));" > ./JeffCost/mwi/application/bundles.php
  - cd ./JeffCost/mwi


script:
  - php artisan travis::test:installapp
  - php artisan test thumbnails

  - php artisan test
  - php artisan test users
  - php artisan test auth
  - php artisan test admin
  - php artisan test settings
  - php artisan test themes